<!DOCTYPE html>
<html>
<meta charset="utf-8">
<link rel="stylesheet" href="/third-party/shoelace/shoelace.css">
<link rel="stylesheet" href="install-dialog.css">
<body class="install">

<div class="wrapper">
  <div class="head-wrapper">
    <header rv-version="version">
      <div class="icon"><img id="script-icon" rv-src="iconUrl"></div>
      <h1><strong>{ name }</strong></h1>
    </header>
  </div>

  <div id="install">
    <p>{'This is a Greasemonkey user script.  Click install to start using it.'|i18n}</p>

    <div id="details" class="info">
      <div rv-hide="grants | empty" id="apis">
        <p>{'Requires special APIs:'|i18n}</p>
        <ul>
          <li rv-each-grant="grants">{ grant }</li>
        </ul>
      </div>

      <div rv-hide="includes | empty" id="includes">
        <p>{'Runs on:'|i18n}</p>
        <ul>
          <li rv-each-include="includes">{ include }</li>
        </ul>
      </div>

      <div rv-hide="matches | empty" id="matches">
        <p>{'Matches:'|i18n}</p>
        <ul>
          <li rv-each-match="matches">{ match }</li>
        </ul>
      </div>

      <div rv-hide="excludes | empty" id="excludes">
        <p>{'Does not run on:'|i18n}</p>
        <ul>
          <li rv-each-exclude="excludes">{ exclude }</li>
        </ul>
      </div>
    </div>

    <!-- TODO: Install in disabled state control, for review before running. -->
  </div>

  <div id="errors" class="info">
    <p>{'Download and Install errors:'|i18n}</p>
    <ul id="error-list">
      <li rv-each-error="errors">
        {error}
      </li>
    </ul>
  </div>
</div>

<div id="footer">
  <div class="text">
    <p>
      {'Malicious user scripts can violate your privacy, steal your data, and act on your behalf without your knowledge.'|i18n}
      <strong>{'You should only install scripts from sources that you trust.'|i18n}</strong>
    </p>
  </div>

  <progress value="0" id="progress"></progress>

  <div id="actions">
    <button id="btn-cancel" class="button-big button-secondary"
        >{'Cancel'|i18n}</button>
    <div class="spacer"></div>
    <button id="btn-install" class="button-big button-success" disabled="disabled"
        ></button>
  </div>
</div>

<script src="/src/i18n.js"></script>
<script src="/third-party/rivets/rivets.bundled.min.js"></script>
<script src="/src/util/iconUrl.js"></script>
<script src="/src/util/rivets-formatters.js"></script>
<script src="install-dialog.js"></script>

</body>
</html>
